# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ "–ú–∞–≥–∞–∑–∏–Ω –¶–≤–µ—Ç–æ–≤"

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Ü–≤–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:

- **Clean Architecture** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Domain, Application, Infrastructure, API)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** - 5 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Saga (Orchestration)** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **Transaction Outbox** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
- **Event-Driven Architecture** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ RabbitMQ
- **API Gateway** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

## –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

### 1. Auth Service (–ø–æ—Ä—Ç 8001)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ `users`)
- JWT —Ç–æ–∫–µ–Ω—ã
- Bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π

**Endpoints**:
- `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –≤—Ö–æ–¥
- `GET /auth/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**–î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `User` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (id, email, password_hash, role, is_active)

---

### 2. Catalog Service (–ø–æ—Ä—Ç 8002)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ü–≤–µ—Ç–æ–≤ –∏ –±—É–∫–µ—Ç–æ–≤

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- PostgreSQL (—Ç–∞–±–ª–∏—Ü—ã `flowers`, `categories`, `bouquets`)
- Redis (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

**Endpoints**:
- `GET /catalog/flowers` - —Å–ø–∏—Å–æ–∫ —Ü–≤–µ—Ç–æ–≤
- `GET /catalog/flowers/{id}` - —Ü–≤–µ—Ç–æ–∫ –ø–æ ID
- `POST /catalog/flowers` - —Å–æ–∑–¥–∞—Ç—å —Ü–≤–µ—Ç–æ–∫
- `GET /catalog/bouquets` - —Å–ø–∏—Å–æ–∫ –±—É–∫–µ—Ç–æ–≤
- `GET /catalog/categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `Flower` - —Ü–≤–µ—Ç–æ–∫ (id, name, price, stock_quantity, flower_type)
- `Category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è (id, name, description)
- `Bouquet` - –±—É–∫–µ—Ç (id, name, price, category_id)

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –¶–≤–µ—Ç—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ Redis –Ω–∞ 1 —á–∞—Å
- –°–ø–∏—Å–∫–∏ —Ü–≤–µ—Ç–æ–≤ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç

---

### 3. Ordering Service (–ø–æ—Ä—Ç 8003)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏, Saga –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- PostgreSQL (—Ç–∞–±–ª–∏—Ü—ã `orders`, `order_items`, `outbox_messages`)
- RabbitMQ (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π)
- Transaction Outbox

**Endpoints**:
- `POST /orders` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- `GET /orders` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /orders/{id}` - –∑–∞–∫–∞–∑ –ø–æ ID

**–î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `Order` - –∑–∞–∫–∞–∑ (id, user_id, status, total_amount, delivery_address)
- `OrderItem` - —ç–ª–µ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞ (id, order_id, flower_id, quantity, price)
- `OutboxMessage` - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**Saga Flow**:
1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ ‚Üí `OrderCreated` —Å–æ–±—ã—Ç–∏–µ
2. –ü–æ–ª—É—á–µ–Ω–∏–µ `PaymentCompleted` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí `OrderPaid` —Å–æ–±—ã—Ç–∏–µ
3. –ü–æ–ª—É—á–µ–Ω–∏–µ `ShipmentCreated` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "shipping"
4. –ü–æ–ª—É—á–µ–Ω–∏–µ `ShipmentDelivered` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "completed"

---

### 4. Payment Service (–ø–æ—Ä—Ç 8004)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- PostgreSQL (—Ç–∞–±–ª–∏—Ü—ã `payments`, `outbox_messages`)
- RabbitMQ (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π)
- Transaction Outbox

**Endpoints**:
- `POST /payments/process` - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞—Ç–µ–∂
- `GET /payments/{id}` - –ø–ª–∞—Ç–µ–∂ –ø–æ ID
- `GET /payments/order/{order_id}` - –ø–ª–∞—Ç–µ–∂–∏ –ø–æ –∑–∞–∫–∞–∑—É

**–î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `Payment` - –ø–ª–∞—Ç–µ–∂ (id, order_id, amount, status, transaction_id)
- `OutboxMessage` - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**Event Flow**:
- –ü–æ–ª—É—á–∞–µ—Ç `OrderCreated` ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `PaymentCompleted`

---

### 5. Delivery Service (–ø–æ—Ä—Ç 8005)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–æ–π

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- PostgreSQL (—Ç–∞–±–ª–∏—Ü—ã `shipments`, `outbox_messages`)
- RabbitMQ (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π)
- Transaction Outbox

**Endpoints**:
- `POST /delivery/create` - —Å–æ–∑–¥–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É
- `GET /delivery/{id}` - –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ ID
- `GET /delivery/order/{order_id}` - –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –∑–∞–∫–∞–∑—É
- `POST /delivery/{id}/deliver` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ

**–î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `Shipment` - –¥–æ—Å—Ç–∞–≤–∫–∞ (id, order_id, status, tracking_number, delivery_address)
- `OutboxMessage` - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**Event Flow**:
- –ü–æ–ª—É—á–∞–µ—Ç `OrderPaid` ‚Üí —Å–æ–∑–¥–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `ShipmentCreated`
- –ü—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `ShipmentDelivered`

---

### 6. API Gateway (–ø–æ—Ä—Ç 8000)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- FastAPI
- HTTP –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–∞—Ä—à—Ä—É—Ç—ã**:
- `/api/auth/*` ‚Üí Auth Service
- `/api/catalog/*` ‚Üí Catalog Service
- `/api/orders/*` ‚Üí Ordering Service
- `/api/payments/*` ‚Üí Payment Service
- `/api/delivery/*` ‚Üí Delivery Service

---

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### PostgreSQL
- **–ü–æ—Ä—Ç**: 5432
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `flower_shop_db`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `flower_shop`
- **–ü–∞—Ä–æ–ª—å**: `flower_shop_pass`

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –ë–î, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏/—Ç–∞–±–ª–∏—Ü–∞–º–∏ (–¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è).

### Redis
- **–ü–æ—Ä—Ç**: 6379
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞

### RabbitMQ
- **–ü–æ—Ä—Ç**: 5672 (AMQP)
- **Management UI**: http://localhost:15672 (guest/guest)
- **Exchange**: `flower_shop` (topic)
- **–û—á–µ—Ä–µ–¥–∏**:
  - `payment_order_events` - —Å–æ–±—ã—Ç–∏—è –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è Payment Service
  - `ordering_payment_events` - —Å–æ–±—ã—Ç–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è Ordering Service
  - `ordering_delivery_events` - —Å–æ–±—ã—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è Ordering Service
  - `delivery_order_events` - —Å–æ–±—ã—Ç–∏—è –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è Delivery Service

---

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. Transaction Outbox

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏—è –≤ RabbitMQ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î.

**–†–µ—à–µ–Ω–∏–µ**: 
1. –í —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î:
   - –°–æ–∑–¥–∞–µ–º –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å (Order, Payment, Shipment)
   - –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ `outbox_messages` —Å —Å–æ–±—ã—Ç–∏–µ–º
   - –ö–æ–º–º–∏—Ç–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
2. –§–æ–Ω–æ–≤—ã–π worker –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏:
   - –ß–∏—Ç–∞–µ—Ç –Ω–µ–ø—Ä–æ—Ü–µ—Å—Å–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `outbox_messages`
   - –ü—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ RabbitMQ
   - –ü–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –í –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ –µ—Å—Ç—å `process_outbox_messages()` –∏ background worker.

---

### 2. Saga (Orchestration)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ**: Ordering Service –≤—ã—Å—Ç—É–ø–∞–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:
1. –°–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `OrderCreated`
2. Payment Service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `PaymentCompleted`
3. Ordering Service –ø–æ–ª—É—á–∞–µ—Ç `PaymentCompleted` ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `OrderPaid`
4. Delivery Service —Å–æ–∑–¥–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `ShipmentCreated`
5. Ordering Service –ø–æ–ª—É—á–∞–µ—Ç `ShipmentCreated` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å
6. Delivery Service –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `ShipmentDelivered`
7. Ordering Service –ø–æ–ª—É—á–∞–µ—Ç `ShipmentDelivered` ‚Üí –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–∫–∞–∑

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (rollback)

---

### 3. Event-Driven Architecture

**–ü—Ä–∏–Ω—Ü–∏–ø**: –°–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã.

**–°–æ–±—ã—Ç–∏—è**:
- `OrderCreated` - –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω
- `PaymentCompleted` - –ø–ª–∞—Ç–µ–∂ –∑–∞–≤–µ—Ä—à–µ–Ω
- `OrderPaid` - –∑–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω
- `ShipmentCreated` - –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞
- `ShipmentDelivered` - –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

---

## –ü–æ—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ (Saga)

```
1. –ö–ª–∏–µ–Ω—Ç ‚Üí POST /orders
   ‚Üì
2. Ordering Service:
   - –°–æ–∑–¥–∞–µ—Ç Order (status: CREATED)
   - –°–æ–∑–¥–∞–µ—Ç OrderItems
   - –°–æ–∑–¥–∞–µ—Ç OutboxMessage (OrderCreated)
   - –ö–æ–º–º–∏—Ç–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üì
3. Outbox Worker (Ordering Service):
   - –ü—É–±–ª–∏–∫—É–µ—Ç OrderCreated –≤ RabbitMQ
   ‚Üì
4. Payment Service (Consumer):
   - –ü–æ–ª—É—á–∞–µ—Ç OrderCreated
   - –°–æ–∑–¥–∞–µ—Ç Payment (status: PROCESSING ‚Üí COMPLETED)
   - –°–æ–∑–¥–∞–µ—Ç OutboxMessage (PaymentCompleted)
   - –ö–æ–º–º–∏—Ç–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üì
5. Outbox Worker (Payment Service):
   - –ü—É–±–ª–∏–∫—É–µ—Ç PaymentCompleted –≤ RabbitMQ
   ‚Üì
6. Ordering Service (Consumer):
   - –ü–æ–ª—É—á–∞–µ—Ç PaymentCompleted
   - –û–±–Ω–æ–≤–ª—è–µ—Ç Order (status: PAYMENT_COMPLETED)
   - –°–æ–∑–¥–∞–µ—Ç OutboxMessage (OrderPaid)
   - –ö–æ–º–º–∏—Ç–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üì
7. Outbox Worker (Ordering Service):
   - –ü—É–±–ª–∏–∫—É–µ—Ç OrderPaid –≤ RabbitMQ
   ‚Üì
8. Delivery Service (Consumer):
   - –ü–æ–ª—É—á–∞–µ—Ç OrderPaid
   - –°–æ–∑–¥–∞–µ—Ç Shipment (status: SHIPPED)
   - –°–æ–∑–¥–∞–µ—Ç OutboxMessage (ShipmentCreated)
   - –ö–æ–º–º–∏—Ç–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üì
9. Outbox Worker (Delivery Service):
   - –ü—É–±–ª–∏–∫—É–µ—Ç ShipmentCreated –≤ RabbitMQ
   ‚Üì
10. Ordering Service (Consumer):
    - –ü–æ–ª—É—á–∞–µ—Ç ShipmentCreated
    - –û–±–Ω–æ–≤–ª—è–µ—Ç Order (status: SHIPPING)
    ‚Üì
11. Delivery Service (—Ä—É—á–Ω–æ–π –≤—ã–∑–æ–≤ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
    - –û–±–Ω–æ–≤–ª—è–µ—Ç Shipment (status: DELIVERED)
    - –°–æ–∑–¥–∞–µ—Ç OutboxMessage (ShipmentDelivered)
    - –ö–æ–º–º–∏—Ç–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    ‚Üì
12. Outbox Worker (Delivery Service):
    - –ü—É–±–ª–∏–∫—É–µ—Ç ShipmentDelivered –≤ RabbitMQ
    ‚Üì
13. Ordering Service (Consumer):
    - –ü–æ–ª—É—á–∞–µ—Ç ShipmentDelivered
    - –û–±–Ω–æ–≤–ª—è–µ—Ç Order (status: COMPLETED)
```

---

## –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)

**Catalog Service** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç—ã: –∫–ª—é—á `flower:{id}`, TTL 1 —á–∞—Å
- –°–ø–∏—Å–∫–∏ —Ü–≤–µ—Ç–æ–≤: –∫–ª—é—á `flowers:list:{skip}:{limit}:{search}`, TTL 5 –º–∏–Ω—É—Ç

**–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–≤–µ—Ç–∫–∞ —É–¥–∞–ª—è—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT Authentication
- –¢–æ–∫–µ–Ω—ã –≤—ã–¥–∞—é—Ç—Å—è Auth Service
- –°–æ–¥–µ—Ä–∂–∞—Ç: user_id, email, role
- TTL: 30 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- –ê–ª–≥–æ—Ä–∏—Ç–º: HS256

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Auth Service
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–∞—Ö
- RabbitMQ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- Redis –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ë–î
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Checks
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç `/health` endpoint
- Docker Compose –∏—Å–ø–æ–ª—å–∑—É–µ—Ç health checks –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `docker-compose logs`
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK, Loki)

### –ú–µ—Ç—Ä–∏–∫–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å Prometheus + Grafana
- –ú–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –æ—à–∏–±–∫–∏

---

## –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è production

1. **–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞**
2. **Service Discovery** (Consul, Eureka)
3. **Circuit Breaker** (Resilience4j, Hystrix)
4. **Rate Limiting**
5. **API Versioning**
6. **Distributed Tracing** (Jaeger, Zipkin)
7. **Centralized Logging** (ELK Stack)
8. **Monitoring** (Prometheus + Grafana)
9. **Secrets Management** (Vault, Kubernetes Secrets)
10. **CI/CD Pipeline**

